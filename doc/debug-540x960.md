# 1. 540x960 视频的COLMAP 增量重建失败分析与解决方案

```sh
[3/4] 正在运行增量重建 (SfM)...
I20260221 18:10:05.407866 134961869981504 incremental_pipeline.cc:260] Loading database
I20260221 18:10:05.408816 134961869981504 database_cache.cc:67] Loading rigs...
I20260221 18:10:05.408839 134961869981504 database_cache.cc:77]  1 in 0.000s
I20260221 18:10:05.408847 134961869981504 database_cache.cc:85] Loading cameras...
I20260221 18:10:05.408856 134961869981504 database_cache.cc:103]  1 in 0.000s
I20260221 18:10:05.408861 134961869981504 database_cache.cc:111] Loading frames...
I20260221 18:10:05.408955 134961869981504 database_cache.cc:128]  135 in 0.000s
I20260221 18:10:05.408961 134961869981504 database_cache.cc:136] Loading matches...
I20260221 18:10:05.410773 134961869981504 database_cache.cc:141]  1263 in 0.002s
I20260221 18:10:05.410785 134961869981504 database_cache.cc:157] Loading images...
I20260221 18:10:05.418718 134961869981504 database_cache.cc:241]  135 in 0.008s (connected 135)
I20260221 18:10:05.418744 134961869981504 database_cache.cc:252] Building correspondence graph...
I20260221 18:10:05.441018 134961869981504 database_cache.cc:279]  in 0.022s (ignored 226)
I20260221 18:10:05.441468 134961869981504 timer.cc:90] Elapsed time: 0.001 [minutes]
I20260221 18:10:05.444120 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.461174 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #21 and #15
I20260221 18:10:05.461309 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.461590 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.461665 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.461784 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.463848 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.481805 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #21 and #29
I20260221 18:10:05.481838 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.481865 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.481883 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.481906 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.483825 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.505835 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #101 and #95
I20260221 18:10:05.505874 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.505904 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.505926 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.505954 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.507942 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.513655 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #101 and #109
I20260221 18:10:05.513670 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.513692 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.513719 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.513733 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.515477 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.533358 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #51 and #45
I20260221 18:10:05.533390 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.533421 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.533441 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.533462 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.535605 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.537448 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #51 and #55
I20260221 18:10:05.537465 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.537491 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.537508 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.537529 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.539442 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.560060 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #111 and #104
I20260221 18:10:05.560087 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.560113 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.560134 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.560155 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.562160 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.564020 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #111 and #105
I20260221 18:10:05.564033 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.564052 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.564065 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.564076 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.565721 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.575409 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #31 and #34
I20260221 18:10:05.575440 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.575468 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.575486 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.575507 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.577492 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.590309 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #31 and #38
I20260221 18:10:05.590352 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.590377 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.590386 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.590404 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.592170 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.611480 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #91 and #99
I20260221 18:10:05.611507 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.611532 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.611550 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.611569 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.613429 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.616828 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #91 and #86
I20260221 18:10:05.616840 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.616858 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.616870 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.616882 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.618578 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.634621 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #41 and #35
I20260221 18:10:05.634647 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.634677 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.634694 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.634712 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.636677 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.638394 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #41 and #37
I20260221 18:10:05.638409 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.638434 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.638451 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.638473 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.640258 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.655026 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #11 and #13
I20260221 18:10:05.655052 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.655080 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.655094 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.655113 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.657112 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.660785 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #11 and #14
I20260221 18:10:05.660800 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.660820 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.660834 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.660847 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.662640 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.674213 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #81 and #85
I20260221 18:10:05.674239 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.674260 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.674278 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.674297 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.676121 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.683414 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #81 and #77
I20260221 18:10:05.683427 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.683445 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.683456 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.683467 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.685133 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.704613 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #61 and #55
I20260221 18:10:05.704636 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.704660 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.704676 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.704691 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.706458 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.712390 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #61 and #70
I20260221 18:10:05.712404 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.712423 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.712435 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.712446 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.714096 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.730212 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #71 and #67
I20260221 18:10:05.730250 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.730278 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.730308 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.730332 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.732363 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.735931 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #71 and #76
I20260221 18:10:05.735952 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.735980 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.735998 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.736013 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.737863 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.750698 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #121 and #118
I20260221 18:10:05.750738 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.750769 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.750791 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.750817 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.752869 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.761512 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #121 and #115
I20260221 18:10:05.761534 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.761557 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.761572 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.761586 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.763363 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.777113 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #1 and #6
I20260221 18:10:05.777141 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.777164 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.777178 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.777199 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.779046 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.780928 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #1 and #7
I20260221 18:10:05.780940 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.780957 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.780969 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.781001 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.782671 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.792200 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #8 and #6
I20260221 18:10:05.792240 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.792267 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.792276 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.792292 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.794244 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.802474 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #8 and #1
I20260221 18:10:05.802491 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.802511 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.802529 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.802549 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.804456 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.811322 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #9 and #7
I20260221 18:10:05.811346 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.811374 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.811392 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.811409 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.813594 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.821228 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #9 and #1
I20260221 18:10:05.821266 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.821297 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.821316 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.821341 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.823893 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.836552 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #131 and #135
I20260221 18:10:05.836584 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.836613 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.836631 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.836653 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.839055 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.844119 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #131 and #125
I20260221 18:10:05.844142 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.844167 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.844185 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.844202 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.845986 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.858160 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #18 and #22
I20260221 18:10:05.858189 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.858215 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.858233 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.858252 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.860150 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.861927 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #18 and #10
I20260221 18:10:05.861939 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.861959 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.861971 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.861982 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.863660 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.867377 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #10 and #6
I20260221 18:10:05.867389 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.867408 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.867418 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.867429 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.869203 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.885562 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #98 and #106
I20260221 18:10:05.885596 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.885620 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.885638 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.885661 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.887745 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.889732 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #98 and #90
I20260221 18:10:05.889752 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.889773 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.889789 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.889804 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.891691 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.900246 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #108 and #110
I20260221 18:10:05.900261 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.900281 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.900308 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.900322 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.902044 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.907698 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #108 and #101
I20260221 18:10:05.907723 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.907748 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.907765 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.907784 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.909589 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.918066 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #96 and #100
I20260221 18:10:05.918081 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.918099 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.918113 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.918125 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.919835 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.923743 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #96 and #104
I20260221 18:10:05.923767 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.923789 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.923805 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.923822 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.925627 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.939337 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #86 and #94
I20260221 18:10:05.939376 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.939409 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.939432 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.939460 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.941544 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.953487 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #106 and #114
I20260221 18:10:05.953508 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.953537 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.953564 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.953581 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.955663 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.965774 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #5 and #7
I20260221 18:10:05.965824 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.965851 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.965862 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.965884 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.967740 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.981212 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #105 and #97
I20260221 18:10:05.981245 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.981269 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.981286 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.981310 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.983242 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.988084 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #102 and #104
I20260221 18:10:05.988105 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.988128 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.988145 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.988161 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.990456 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:05.994487 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #102 and #94
I20260221 18:10:05.994531 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:05.994579 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:05.994606 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:05.994634 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:05.997660 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.011750 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #46 and #42
I20260221 18:10:06.011795 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.011824 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.011839 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.011863 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.013723 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.015296 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #46 and #54
I20260221 18:10:06.015309 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.015329 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.015341 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.015352 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.017030 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.025100 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #48 and #52
I20260221 18:10:06.025124 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.025148 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.025164 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.025180 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.026963 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.030286 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #48 and #56
I20260221 18:10:06.030299 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.030321 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.030333 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.030344 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.032047 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.045044 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #68 and #60
I20260221 18:10:06.045069 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.045095 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.045112 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.045131 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.046978 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.048410 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #68 and #76
I20260221 18:10:06.048423 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.048441 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.048451 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.048463 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.050134 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.064183 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #124 and #131
I20260221 18:10:06.064212 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.064238 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.064251 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.064272 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.066165 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.067879 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #124 and #116
I20260221 18:10:06.067892 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.067913 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.067934 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.067947 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.069669 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.075884 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #100 and #92
I20260221 18:10:06.075905 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.075928 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.075944 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.075960 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.077736 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.086284 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #4 and #11
I20260221 18:10:06.086300 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.086321 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.086343 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.086357 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.088177 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.105229 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #16 and #12
I20260221 18:10:06.105264 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.105293 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.105314 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.105345 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.107849 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.109476 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #16 and #11
I20260221 18:10:06.109491 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.109522 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.109539 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.109554 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.111399 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.123847 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #38 and #42
I20260221 18:10:06.123878 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.123906 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.123923 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.123945 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.125852 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.134331 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #14 and #12
I20260221 18:10:06.134368 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.134392 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.134402 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.134416 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.136203 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.146613 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #92 and #84
I20260221 18:10:06.146650 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.146676 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.146693 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.146719 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.148810 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.163040 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #24 and #32
I20260221 18:10:06.163072 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.163101 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.163115 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.163138 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.165003 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.166816 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #24 and #16
I20260221 18:10:06.166830 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.166850 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.166861 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.166873 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.168651 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.179812 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #70 and #78
I20260221 18:10:06.179838 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.179862 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.179879 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.179899 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.181698 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.193287 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #34 and #30
I20260221 18:10:06.193320 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.193350 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.193369 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.193391 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.195303 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.207394 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #95 and #87
I20260221 18:10:06.207420 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.207441 134961869981504 bundle_adjustment.cc:544] Failed to fix Gauge with two cameras. Falling back to fixing Gauge with three points.
W20260221 18:10:06.207459 134961869981504 bundle_adjustment.cc:469] Failed to fix Gauge due to insufficient number of fixed points: 0
I20260221 18:10:06.207477 134961869981504 incremental_pipeline.cc:565] Discarding reconstruction due to bad initial pair
I20260221 18:10:06.209289 134961869981504 incremental_pipeline.cc:307] Finding good initial image pair
I20260221 18:10:06.213488 134961869981504 incremental_pipeline.cc:331] Registering initial image pair #97 and #93
I20260221 18:10:06.213502 134961869981504 incremental_pipeline.cc:345] Global bundle adjustment
W20260221 18:10:06.213524 134961869981504 bundle_adjustment.cc:544] Failed to fix Gaug
```


看到您的 COLMAP 增量重建（SfM）过程反复失败，这是一个非常常见的问题。错误的核心是 **"Failed to fix Gauge due to insufficient number of fixed points: 0"**，这意味着重建无法建立坐标系参考点。

## 🔍 问题诊断

### 错误分析
从日志中可以看到：
1. **总共135张图像**被加载
2. **多次尝试初始化图像对都失败**（尝试了40多对）
3. 每次失败都是同样原因：**无法固定足够的点来建立坐标系**
4. 这意味着系统找不到足够可靠的特征点匹配来建立初始的3D模型

## ✅ 解决方案（逐步尝试）

### 方案1：检查图像质量和特征提取
首先检查图像集的基本问题：

```bash
# 1. 查看图像基本信息
identify images/*.jpg | head -5

# 2. 检查图像数量
ls images/*.jpg | wc -l

# 3. 检查图像分辨率是否一致
identify -format "%wx%h\n" images/*.jpg | sort | uniq -c
```

### 方案2：使用全局重建代替增量重建
增量重建对初始图像对要求很高，可以尝试全局重建：

```bash
# 1. 先删除旧的数据库和重建结果
rm -rf database.db sparse/

# 2. 重新提取特征点（增加特征点数量）
colmap feature_extractor \
  --database_path database.db \
  --image_path images \
  --ImageReader.single_camera 1 \
  --SiftExtraction.max_num_features 16384 \
  --SiftExtraction.estimate_affine_shape 1 \
  --SiftExtraction.domain_size_pooling 1

# 3. 使用更鲁棒的匹配方式
colmap exhaustive_matcher \
  --database_path database.db \
  --SiftMatching.guided_matching 1

# 4. 尝试全局重建（而不是增量重建）
colmap mapper \
  --database_path database.db \
  --image_path images \
  --output_path sparse \
  --Mapper.init_min_num_inliers 30 \
  --Mapper.abs_pose_min_num_inliers 15 \
  --Mapper.min_num_matches 10 \
  --Mapper.init_min_tri_angle 4.0 \
  --Mapper.init_max_reg_trials 50
```

### 方案3：调整参数（针对困难场景）
如果默认参数不行，尝试调整：

```bash
# 1. 特征提取参数（更宽松）
colmap feature_extractor \
  --database_path database.db \
  --image_path images \
  --ImageReader.single_camera 1 \
  --SiftExtraction.max_num_features 32768 \
  --SiftExtraction.peak_threshold 0.006 \
  --SiftExtraction.edge_threshold 10

# 2. 使用序列匹配（如果图像是连续拍摄的）
colmap sequential_matcher \
  --database_path database.db \
  --SequentialMatching.overlap 5 \
  --SequentialMatching.quadratic_overlap 1 \
  --SiftMatching.guided_matching 1

# 3. 重建时使用更宽松的参数
colmap mapper \
  --database_path database.db \
  --image_path images \
  --output_path sparse \
  --Mapper.init_min_num_inliers 20 \
  --Mapper.abs_pose_min_num_inliers 8 \
  --Mapper.min_num_matches 5 \
  --Mapper.init_min_tri_angle 2.0 \
  --Mapper.init_max_reg_trials 100 \
  --Mapper.max_reg_trials 10 \
  --Mapper.multiple_models 0 \
  --Mapper.extract_colors 1
```

### 方案4：使用已知相机参数（如果有）
如果知道相机内参，可以显著提高重建成功率：

```bash
# 创建相机内参文件 camera.txt
cat > cameras.txt << EOF
1 SIMPLE_PINHOLE 1920 1080 1000 960 540
EOF

# 使用已知相机参数进行特征提取
colmap feature_extractor \
  --database_path database.db \
  --image_path images \
  --ImageReader.camera_model SIMPLE_PINHOLE \
  --ImageReader.single_camera_id 1 \
  --ImageReader.camera_params 1000,960,540

# 继续匹配和重建...
```

### 方案5：分步手动重建
如果自动重建失败，可以尝试手动指定初始图像对：

```bash
# 1. 手动选择重叠度高的两张图像作为初始对
# 假设选择 image_001.jpg 和 image_002.jpg
python3 -c "
import sqlite3
conn = sqlite3.connect('database.db')
c = conn.cursor()
# 查找这两张图像的id
c.execute('SELECT image_id, name FROM images WHERE name IN (?, ?)', ('image_001.jpg', 'image_002.jpg'))
rows = c.fetchall()
for row in rows:
    print(f'Image ID {row[0]}: {row[1]}')
conn.close()
"

# 2. 创建初始重建
colmap point_triangulator \
  --database_path database.db \
  --image_path images \
  --input_path sparse/0 \
  --output_path sparse/1 \
  --Mapper.init_image_id1 1 \  # 替换为实际的image_id
  --Mapper.init_image_id2 2 \
  --Mapper.init_min_num_inliers 30

# 3. 继续增量注册其他图像
colmap image_registrator \
  --database_path database.db \
  --input_path sparse/1 \
  --output_path sparse/2
```

### 方案6：检查并修复常见问题
```bash
#!/bin/bash
echo "=== COLMAP 重建问题诊断 ==="

# 1. 检查图像文件
echo "1. 检查图像文件格式和大小..."
identify images/*.jpg 2>/dev/null | head -3

# 2. 检查特征点数量
echo -e "\n2. 检查数据库中的特征点数量..."
sqlite3 database.db "SELECT COUNT(*) FROM keypoints;" 2>/dev/null || echo "数据库不存在"

# 3. 检查匹配数量
echo -e "\n3. 检查匹配数量..."
sqlite3 database.db "SELECT COUNT(*) FROM matches;" 2>/dev/null || echo "数据库不存在"

# 4. 尝试可视化特征点
echo -e "\n4. 尝试提取并可视化特征点..."
colmap feature_extractor \
  --database_path test.db \
  --image_path images \
  --SiftExtraction.max_num_features 1000  # 先提取少量测试

if [ $? -eq 0 ]; then
    echo "✓ 特征提取成功"
    # 查看特征点
    sqlite3 test.db "SELECT COUNT(*) FROM keypoints;"
else
    echo "✗ 特征提取失败"
fi
```

### 方案7：使用图形界面调试
如果命令行一直失败，使用 GUI 进行调试：

```bash
# 启动 COLMAP GUI
colmap gui

# 然后在 GUI 中：
# 1. File > New project
# 2. 选择图像文件夹
# 3. Processing > Feature extraction
# 4. Processing > Feature matching
# 5. Reconstruction > Start reconstruction
# 6. 在 GUI 中查看哪些图像注册失败
```

## 📊 参数调整参考表

| 参数 | 默认值 | 建议值（困难场景） | 说明 |
|------|--------|-------------------|------|
| `SiftExtraction.max_num_features` | 8192 | 16384-32768 | 增加特征点数量 |
| `SiftExtraction.peak_threshold` | 0.0067 | 0.003-0.01 | 降低阈值提取更多特征 |
| `SiftExtraction.edge_threshold` | 10 | 5-20 | 降低边缘阈值 |
| `init_min_num_inliers` | 100 | 20-50 | 降低初始匹配要求 |
| `init_min_tri_angle` | 16.0 | 2.0-8.0 | 减小最小三角化角度 |
| `init_max_reg_trials` | 2 | 50-100 | 增加初始注册尝试次数 |
| `abs_pose_min_num_inliers` | 30 | 8-15 | 降低绝对姿态估计要求 |

## 💡 针对不同场景的优化策略

### 场景1：室内小物体重建
```bash
# 室内通常纹理较少，需要更敏感的特征检测
colmap feature_extractor \
  --database_path database.db \
  --image_path images \
  --SiftExtraction.max_num_features 32768 \
  --SiftExtraction.peak_threshold 0.003 \
  --SiftExtraction.edge_threshold 5
```

### 场景2：室外大场景重建
```bash
# 室外场景特征丰富，但可能有重复纹理
colmap feature_extractor \
  --database_path database.db \
  --image_path images \
  --SiftExtraction.max_num_features 16384 \
  --SiftExtraction.peak_threshold 0.01 \
  --SiftExtraction.domain_size_pooling 1
```

### 场景3：顺序拍摄的视频帧
```bash
# 使用序列匹配，假设图像按顺序命名
colmap sequential_matcher \
  --database_path database.db \
  --SequentialMatching.overlap 10 \
  --SequentialMatching.quadratic_overlap 1
```

## 🚀 快速修复脚本

如果上述方法都太复杂，运行这个一键修复脚本：

```bash
#!/bin/bash
# COLMAP 一键修复脚本

echo "=== COLMAP 重建修复脚本 ==="

# 1. 清理旧数据
echo "1. 清理旧数据..."
rm -rf database.db sparse/ matches/

# 2. 使用增强参数提取特征
echo "2. 提取特征点（增强参数）..."
colmap feature_extractor \
  --database_path database.db \
  --image_path images \
  --ImageReader.single_camera 1 \
  --SiftExtraction.max_num_features 24576 \
  --SiftExtraction.peak_threshold 0.004 \
  --SiftExtraction.edge_threshold 8 \
  --SiftExtraction.estimate_affine_shape 1 \
  --SiftExtraction.domain_size_pooling 1

# 3. 使用 exhaustive + spatial 匹配
echo "3. 特征匹配..."
colmap exhaustive_matcher \
  --database_path database.db \
  --SiftMatching.guided_matching 1 \
  --SiftMatching.max_error 4.0 \
  --SiftMatching.max_num_matches 32768

# 4. 使用宽松参数进行重建
echo "4. 开始重建（宽松参数）..."
colmap mapper \
  --database_path database.db \
  --image_path images \
  --output_path sparse \
  --Mapper.init_min_num_inliers 25 \
  --Mapper.abs_pose_min_num_inliers 10 \
  --Mapper.min_num_matches 8 \
  --Mapper.init_min_tri_angle 3.0 \
  --Mapper.init_max_reg_trials 80 \
  --Mapper.max_reg_trials 8 \
  --Mapper.multiple_models 1 \
  --Mapper.extract_colors 1 \
  --Mapper.ba_global_function_tolerance 0.000001

echo "5. 检查结果..."
if [ -d "sparse/0" ]; then
    echo "✓ 重建成功！重建结果在 sparse/0/"
    echo "重建的相机数量："
    find sparse/0 -name "*.bin" -o -name "*.txt" | xargs grep -l "CAMERA" | wc -l
else
    echo "✗ 重建失败，尝试其他方法..."
fi
```

## ⚠️ 常见失败原因检查清单

1. **✅ 图像质量**：图像是否模糊、过暗、过亮？
2. **✅ 图像重叠**：相邻图像是否有足够重叠（建议 >60%）？
3. **✅ 纹理丰富**：场景是否有足够纹理特征？
4. **✅ 相机运动**：是否在纯旋转或纯平移下拍摄？
5. **✅ 图像顺序**：图像命名是否按拍摄顺序？
6. **✅ 特征匹配**：是否有足够的特征匹配点？
7. **✅ 相机参数**：是否使用了正确的相机模型？

## 📋 下一步建议

1. **先运行诊断脚本**，查看基本问题
2. **尝试全局重建**（方案2），通常比增量重建更鲁棒
3. **如果还是失败**，考虑使用其他软件如 OpenMVG 或 VisualSFM
4. **检查图像集**，可能需要重新拍摄或筛选图像

**最可能的原因**：您的图像集可能缺乏足够的纹理特征，或者图像之间的重叠度不够。建议先运行诊断脚本，然后尝试全局重建方法。如果问题依旧，可能需要提供更多关于图像集的信息（拍摄内容、相机参数等）以便进一步分析。

<!-- -------------------------------------- -->
==============================================
<!-- -------------------------------------- -->

# 2.图像问题分析与解决方案

```sh
$ identify ./*.jpg | head -5
./frame_0001.jpg JPEG 540x960 540x960+0+0 8-bit sRGB 33178B 0.000u 0:00.000
./frame_0002.jpg JPEG 540x960 540x960+0+0 8-bit sRGB 54284B 0.000u 0:00.000
./frame_0003.jpg JPEG 540x960 540x960+0+0 8-bit sRGB 47188B 0.000u 0:00.000
./frame_0004.jpg JPEG 540x960 540x960+0+0 8-bit sRGB 51888B 0.000u 0:00.000
./frame_0005.jpg JPEG 540x960 540x960+0+0 8-bit sRGB 54411B 0.000u 0:00.000
(img-modeling) abner@abner-XPS:~/task03v2mesh/dat/frames$ ls ./*.jpg | wc -l
135
(img-modeling) abner@abner-XPS:~/task03v2mesh/dat/frames$ identify -format "%wx%h\n" ./*.jpg | sort | uniq -c
    135 540x960
```
 

您提供的图像规格揭示了重建失败的**根本原因**。135张图像均为 **540×960 竖屏分辨率**，这是导致重建失败的**关键因素**。

## 🔍 问题根源分析

### 1. **图像分辨率过低**
- **540×960 = 0.5 MP（百万像素）**
- 对比：专业三维重建通常需要 **2-12 MP**
- **影响**：特征点数量严重不足，导致匹配困难

### 2. **竖屏构图问题**
- **9:16 竖屏比例**
- **问题**：
  - 视野狭窄，场景覆盖不足
  - 相邻图像重叠区域小
  - 特征点分布不均（集中在垂直方向）

### 3. **文件大小过小**
- 33-54KB/图像
- **表明**：高压缩率 JPEG，细节丢失严重
- 影响特征检测的准确性

## ✅ 解决方案（按优先级排序）

### 方案1：重新拍摄（最佳方案）
**如果可能，重新采集图像：**

```bash
# 建议拍摄参数
# 1. 横屏拍摄：16:9 或 4:3 比例
# 2. 分辨率：至少 1920×1080 (2MP)
# 3. 图像质量：JPEG 质量 > 90%
# 4. 重叠度：相邻图像重叠 60-80%
# 5. 多角度环绕拍摄
```

### 方案2：优化现有图像的预处理
**如果无法重新拍摄：**

```bash
# 1. 将图像旋转为横屏（如果拍摄时是横屏手持）
for img in *.jpg; do
    convert "$img" -rotate 90 "rotated_${img}"
done

# 2. 提高图像质量（去噪+锐化）
mkdir -p enhanced_images
for img in *.jpg; do
    convert "$img" \
        -enhance \
        -unsharp 0.5x0.5+0.5+0.008 \
        -quality 95 \
        "enhanced_images/${img}"
done
```

### 方案3：调整 COLMAP 参数（针对低分辨率图像）
**大幅调整参数以适应低分辨率图像：**

```bash
#!/bin/bash
# 针对 540×960 图像的特殊优化配置

echo "=== COLMAP 低分辨率图像优化配置 ==="

# 1. 清理旧数据
rm -rf database.db sparse/

# 2. 特征提取（针对低分辨率优化）
colmap feature_extractor \
  --database_path database.db \
  --image_path . \
  --ImageReader.single_camera 1 \
  --ImageReader.camera_model SIMPLE_RADIAL \
  --SiftExtraction.max_num_features 8192 \        # 减少特征点（图像小）
  --SiftExtraction.peak_threshold 0.001 \        # 降低阈值，提取更多特征
  --SiftExtraction.edge_threshold 5 \            # 降低边缘阈值
  --SiftExtraction.max_image_size 2000 \         # 限制最大尺寸
  --SiftExtraction.first_octave 0 \              # 从原始分辨率开始
  --SiftExtraction.num_octaves 4 \               # 减少金字塔层数

# 3. 特征匹配（更宽松的参数）
colmap exhaustive_matcher \
  --database_path database.db \
  --SiftMatching.guided_matching 1 \
  --SiftMatching.max_error 6.0 \                 # 增加最大误差
  --SiftMatching.max_distance 0.8 \              # 增加最大距离
  --SiftMatching.max_ratio 0.9 \                 # 更宽松的比率测试
  --SiftMatching.max_num_matches 5000 \          # 限制匹配数量

# 4. 重建（针对小图像的特殊参数）
colmap mapper \
  --database_path database.db \
  --image_path . \
  --output_path sparse \
  --Mapper.init_min_num_inliers 15 \             # 大幅降低初始要求
  --Mapper.abs_pose_min_num_inliers 6 \          # 大幅降低
  --Mapper.min_num_matches 4 \                   # 大幅降低
  --Mapper.init_min_tri_angle 1.5 \              # 更小的三角化角度
  --Mapper.init_max_reg_trials 200 \             # 更多尝试
  --Mapper.max_reg_trials 20 \
  --Mapper.multiple_models 1 \                   # 允许多模型
  --Mapper.ba_refine_focal_length 1 \
  --Mapper.ba_refine_principal_point 0 \
  --Mapper.ba_refine_extra_params 0 \
  --Mapper.min_focal_length_ratio 0.1 \          # 允许更小的焦距
  --Mapper.max_focal_length_ratio 10 \
  --Mapper.max_extra_param 1

echo "重建完成，检查结果..."
```

### 方案4：图像增强与上采样
**通过算法提升图像质量：**

```bash
# 1. 安装图像处理工具
# pip install opencv-python pillow

# 2. 运行图像增强脚本
python3 << 'EOF'
import cv2
import os
import numpy as np

# 创建输出目录
os.makedirs('upscaled_images', exist_ok=True)

# 上采样因子 (谨慎使用，可能导致伪影)
upscale_factor = 1.5  # 1.5倍上采样，得到 810×1440

for img_name in sorted(os.listdir('.')):
    if img_name.lower().endswith(('.jpg', '.jpeg', '.png')):
        img = cv2.imread(img_name)
        if img is not None:
            # 方法1：双三次插值上采样
            h, w = img.shape[:2]
            new_h, new_w = int(h * upscale_factor), int(w * upscale_factor)
            upscaled = cv2.resize(img, (new_w, new_h), interpolation=cv2.INTER_CUBIC)
            
            # 方法2：轻微锐化增强边缘
            kernel = np.array([[-1,-1,-1],
                               [-1, 9,-1],
                               [-1,-1,-1]])
            sharpened = cv2.filter2D(upscaled, -1, kernel)
            
            # 保存
            out_name = f"upscaled_images/{img_name}"
            cv2.imwrite(out_name, sharpened, [cv2.IMWRITE_JPEG_QUALITY, 95])
            print(f"处理完成: {img_name} ({h}x{w} -> {new_h}x{new_w})")

print(f"总处理图像数: {len([f for f in os.listdir('.') if f.lower().endswith(('.jpg','.jpeg','.png'))])}")
EOF

# 3. 使用上采样后的图像进行重建
colmap feature_extractor \
  --database_path database.db \
  --image_path upscaled_images \
  --SiftExtraction.max_num_features 12000 \
  --SiftExtraction.peak_threshold 0.002
```

### 方案5：分块重建策略
**将场景分成多个部分分别重建：**

```bash
#!/bin/bash
# 分块重建策略

# 假设图像按顺序拍摄，将135张图像分成3组
mkdir -p group1 group2 group3

# 分组图像（示例）
ls *.jpg | head -45 | xargs -I {} cp {} group1/
ls *.jpg | tail -90 | head -45 | xargs -I {} cp {} group2/
ls *.jpg | tail -45 | xargs -I {} cp {} group3/

# 分别重建每个组
for i in {1..3}; do
    echo "重建组 $i..."
    mkdir -p sparse_$i
    colmap feature_extractor \
      --database_path database_$i.db \
      --image_path group$i
    
    colmap exhaustive_matcher \
      --database_path database_$i.db
    
    colmap mapper \
      --database_path database_$i.db \
      --image_path group$i \
      --output_path sparse_$i \
      --Mapper.init_min_num_inliers 10 \
      --Mapper.abs_pose_min_num_inliers 5
done

# 合并重建结果（如果部分成功）
echo "尝试合并成功部分..."
```

## 📊 参数调整指南

| 参数 | 标准值 | 针对 540×960 的建议值 | 说明 |
|------|--------|----------------------|------|
| **图像分辨率** | 2000×1500+ | 540×960 (现状) | **主要瓶颈** |
| **SiftExtraction.max_num_features** | 16384 | 6000-8000 | 减少，避免噪声 |
| **SiftExtraction.peak_threshold** | 0.0067 | 0.001-0.002 | 降低，提取更多弱特征 |
| **SiftExtraction.edge_threshold** | 10 | 3-5 | 降低边缘限制 |
| **init_min_num_inliers** | 100 | 10-15 | 大幅降低初始要求 |
| **init_min_tri_angle** | 16.0 | 1.0-2.0 | 小角度也能三角化 |
| **相机模型** | SIMPLE_PINHOLE | SIMPLE_RADIAL | 更简单的模型 |

## 🚀 快速修复工作流

**推荐按此顺序尝试：**

```bash
# 步骤1：备份原图
mkdir original_images
cp *.jpg original_images/

# 步骤2：旋转为横屏（如果拍摄时是横屏）
for f in *.jpg; do
    convert "$f" -rotate 90 "rotated_$f"
done
# 检查是否需要旋转：查看图像内容方向

# 步骤3：使用优化参数运行COLMAP
# 复制上面的"方案3"完整脚本并运行

# 步骤4：如果失败，尝试图像增强
# 运行"方案4"的上采样脚本

# 步骤5：分块重建作为最后手段
# 运行"方案5"的分块策略
```

## 💡 拍摄建议（未来项目）

如果您可以重新拍摄，请遵循：

1. **分辨率**：至少 **1920×1080** (2MP)，推荐 **3840×2160** (4K)
2. **方向**：**横屏拍摄** (16:9)
3. **格式**：RAW 或高质量 JPEG (质量 > 90%)
4. **重叠度**：相邻图像 **60-80%** 重叠
5. **拍摄模式**：
   - 固定焦距（不要变焦）
   - 固定白平衡
   - 如有三脚架，使用它
6. **光照**：均匀照明，避免强烈阴影
7. **覆盖方式**：
   ```
   水平环拍 → 上下倾斜 → 近距离细节
   ```

## ⚠️ 预期结果管理

基于当前图像规格（540×960 竖屏），您需要**降低期望**：

1. **重建成功率**：可能只有 50-70%
2. **模型精度**：较低，细节缺失
3. **纹理质量**：模糊，细节不足
4. **适用场景**：仅适用于对精度要求不高的预览用途

## 📋 诊断检查清单

1. [ ] 检查图像实际内容方向（是否需要旋转）
2. [ ] 检查图像是否模糊（运动模糊/失焦）
3. [ ] 检查光照是否均匀
4. [ ] 检查图像间重叠度是否足够
5. [ ] 尝试使用 **VisualSFM** 或 **Meshroom** 作为替代方案

**总结**：您当前图像的主要问题是**分辨率过低**和**竖屏构图**。首先尝试**方案3的优化参数**，这最有可能成功。如果失败，考虑重新拍摄或使用上采样增强。请记住，图像质量是三维重建的基础，GIGO（垃圾进，垃圾出）原则在这里完全适用。
<!-- -------------------------------------- -->
======================================================
<!-- -------------------------------------- -->
# 3. 如何用python实现  将图像旋转为横屏 以及 提高图像质量（去噪+锐化）

你想要用Python实现两个核心功能：一是自动将图像旋转为横屏（纠正手持拍摄的方向问题），二是对图像做去噪+锐化来提升画质。我会给你一份**完整、可直接运行的代码**，基于OpenCV和PIL库实现，兼顾实用性和鲁棒性，新手也能直接用。

---

## 实现思路拆解
### 1. 自动旋转图像为横屏
核心逻辑：读取图像的**EXIF方向信息**（手机/相机拍摄时会记录拍摄方向），根据EXIF标签值旋转图像；如果没有EXIF信息，则通过图像宽高比判断，确保最终宽>高（横屏）。

### 2. 图像质量提升（去噪+锐化）
- **去噪**：用OpenCV的`fastNlMeansDenoisingColored`（彩色图像非局部均值去噪），比简单高斯模糊去噪更保留细节；
- **锐化**：用拉普拉斯算子或自定义卷积核做锐化，增强边缘和细节，避免过度锐化导致噪点放大。

---

## 完整可运行代码
```python
import cv2
import numpy as np
from PIL import Image, ExifTags
import os

def auto_rotate_to_landscape(image_path):
    """
    自动将图像旋转为横屏（宽>高），优先读取EXIF方向信息，无则按宽高比判断
    :param image_path: 输入图像路径
    :return: 旋转后的OpenCV格式图像（BGR）
    """
    # 第一步：用PIL读取EXIF方向信息
    try:
        pil_img = Image.open(image_path)
        # 获取EXIF方向标签
        exif = pil_img._getexif()
        orientation = None
        if exif is not None:
            for tag, value in exif.items():
                if ExifTags.TAGS.get(tag) == 'Orientation':
                    orientation = value
                    break
        
        # 根据EXIF Orientation值旋转图像
        if orientation == 1:
            # 正常方向，无需旋转
            rotated_pil = pil_img
        elif orientation == 2:
            # 水平翻转
            rotated_pil = pil_img.transpose(Image.FLIP_LEFT_RIGHT)
        elif orientation == 3:
            # 旋转180°
            rotated_pil = pil_img.transpose(Image.ROTATE_180)
        elif orientation == 4:
            # 垂直翻转
            rotated_pil = pil_img.transpose(Image.FLIP_TOP_BOTTOM)
        elif orientation == 5:
            # 先水平翻转再旋转90°顺时针
            rotated_pil = pil_img.transpose(Image.FLIP_LEFT_RIGHT).transpose(Image.ROTATE_90)
        elif orientation == 6:
            # 旋转90°顺时针（最常见：竖屏转横屏）
            rotated_pil = pil_img.transpose(Image.ROTATE_90)
        elif orientation == 7:
            # 先水平翻转再旋转90°逆时针
            rotated_pil = pil_img.transpose(Image.FLIP_LEFT_RIGHT).transpose(Image.ROTATE_270)
        elif orientation == 8:
            # 旋转90°逆时针
            rotated_pil = pil_img.transpose(Image.ROTATE_270)
        else:
            # 无明确方向，按宽高比判断
            width, height = pil_img.size
            if height > width:
                rotated_pil = pil_img.transpose(Image.ROTATE_90)
            else:
                rotated_pil = pil_img
        
        # 转换为OpenCV格式（PIL是RGB，OpenCV是BGR）
        rotated_cv = cv2.cvtColor(np.array(rotated_pil), cv2.COLOR_RGB2BGR)
        pil_img.close()
        rotated_pil.close()
        
    except Exception as e:
        # 无EXIF信息时的降级处理
        print(f"读取EXIF失败：{e}，按宽高比旋转")
        cv_img = cv2.imread(image_path)
        height, width = cv_img.shape[:2]
        if height > width:
            rotated_cv = cv2.rotate(cv_img, cv2.ROTATE_90_CLOCKWISE)
        else:
            rotated_cv = cv_img
    
    return rotated_cv

def enhance_image_quality(image):
    """
    图像质量提升：先去噪，再锐化
    :param image: OpenCV格式的BGR图像
    :return: 增强后的图像
    """
    # 第一步：彩色图像去噪（参数可根据需求调整）
    # h：去噪强度（1-10，值越大去噪越明显，细节丢失越多）
    # templateWindowSize：模板窗口大小（必须为奇数）
    # searchWindowSize：搜索窗口大小（必须为奇数）
    denoised = cv2.fastNlMeansDenoisingColored(
        image, 
        None, 
        h=8,               # 亮度通道去噪强度
        hColor=8,          # 颜色通道去噪强度
        templateWindowSize=7,
        searchWindowSize=21
    )
    
    # 第二步：锐化（自定义卷积核，避免过度锐化）
    kernel = np.array([[0, -1, 0],
                       [-1, 5, -1],
                       [0, -1, 0]])  # 简单锐化核
    # 也可以用拉普拉斯锐化：kernel = np.array([[0,1,0],[1,-4,1],[0,1,0]])
    sharpened = cv2.filter2D(denoised, -1, kernel)
    
    # 可选：调整对比度和亮度（进一步提升视觉效果）
    alpha = 1.1  # 对比度（1.0为原图，>1增强）
    beta = 5     # 亮度（0为原图，>0增亮）
    enhanced = cv2.convertScaleAbs(sharpened, alpha=alpha, beta=beta)
    
    return enhanced

def process_image(input_path, output_path):
    """
    完整流程：读取→旋转→增强→保存
    :param input_path: 输入图像路径
    :param output_path: 输出图像路径
    """
    if not os.path.exists(input_path):
        print(f"输入文件不存在：{input_path}")
        return
    
    # 1. 自动旋转为横屏
    rotated_img = auto_rotate_to_landscape(input_path)
    
    # 2. 提升图像质量
    enhanced_img = enhance_image_quality(rotated_img)
    
    # 3. 保存结果
    cv2.imwrite(output_path, enhanced_img)
    print(f"处理完成，结果保存至：{output_path}")

# -------------------------- 测试用例 --------------------------
if __name__ == "__main__":
    # 替换为你的输入/输出路径（支持jpg/png等常见格式）
    INPUT_IMAGE = "test.jpg"   # 输入图像路径
    OUTPUT_IMAGE = "output.jpg"  # 输出图像路径
    
    process_image(INPUT_IMAGE, OUTPUT_IMAGE)
```

---

## 代码关键说明
### 1. 自动旋转功能
- 优先读取EXIF的`Orientation`标签（手机拍摄的核心方向信息），覆盖8种常见拍摄方向；
- 无EXIF信息时，通过宽高比判断（高>宽则旋转90°），确保最终是横屏；
- 兼容PIL和OpenCV格式转换，避免颜色通道错乱。

### 2. 画质提升功能
- **去噪**：`fastNlMeansDenoisingColored`是OpenCV针对彩色图像的最优去噪算法之一，比高斯模糊更能保留细节；
  - `h`和`hColor`：建议取值5-10，值越大去噪越强，但细节丢失越多；
  - 窗口大小必须为奇数，默认7和21是平衡速度和效果的取值。
- **锐化**：用5×5核心的锐化卷积核，比拉普拉斯算子更温和，避免噪点放大；
- 可选的对比度/亮度调整：`alpha`（1.0-1.2）、`beta`（0-10），根据图像实际情况微调。

### 3. 环境依赖
运行前需安装依赖库：
```bash
pip install opencv-python pillow numpy
```

---

## 调优建议（根据实际图像调整）
1. 若去噪后细节丢失过多：降低`h`和`hColor`（比如改为5）；
2. 若锐化效果不明显：换用更强的锐化核，或增大`alpha`（比如1.2）；
3. 若图像偏暗：增大`beta`（比如10）；
4. 若处理大图像（比如4K）：可先缩放图像再处理，提升速度。

---

### 总结
1. 自动旋转核心是**读取EXIF方向标签**，降级方案是宽高比判断，确保兼容所有拍摄场景；
2. 画质提升遵循“先去噪后锐化”的顺序，用非局部均值去噪保留细节，自定义卷积核温和锐化；
3. 代码可直接运行，仅需替换输入输出路径，依赖库少、兼容性强。

如果需要处理批量图像（比如整个文件夹），我可以补充批量处理的代码，只需循环调用`process_image`函数即可。

